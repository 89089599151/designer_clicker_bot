# Designer Clicker Bot ‚Äî UX Redesign Plan

## 1. –ê—É–¥–∏—Ç —Ç–µ–∫—É—â–µ–≥–æ UX

### 1.1 –ö–∞—Ä—Ç–∞ –º–µ–Ω—é –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä
| –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ | –ö–Ω–æ–ø–∫–∏ –≤ rows | –î–æ–ø. –Ω–∞–≤–∏–≥–∞—Ü–∏—è —á–µ—Ä–µ–∑ `_with_universal_nav` | –ò—Ç–æ–≥–æ –∫–Ω–æ–ø–æ–∫ | –ù–∞–±–ª—é–¥–µ–Ω–∏—è |
| --- | --- | --- | --- | --- |
| `kb_main_menu` | 7 —Ä—è–¥–æ–≤: –ø–æ 2 –∫–Ω–æ–ø–∫–∏ + –æ–¥–Ω–∞ –æ–¥–∏–Ω–æ—á–Ω–∞—è (`/top`) | –¥–æ–±–∞–≤–ª—è–µ—Ç ¬´‚óÄÔ∏è –ù–∞–∑–∞–¥/‚ùå –û—Ç–º–µ–Ω–∞¬ª –∏ ¬´üè† –ú–µ–Ω—é¬ª | 16 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö | –¢–æ–ø-—É—Ä–æ–≤–µ–Ω—å –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç Cancel. „ÄêF:designer_clicker_bot.py‚Ä†L293-L307„Äë„ÄêF:designer_clicker_bot.py‚Ä†L277-L286„Äë |
| `kb_shop_menu` | 2 —Ä—è–¥–∞ (‚ö°/üß∞ –∏ üìä) | —Ç–µ –∂–µ –Ω–∞–≤-—Ä—è–¥—ã | –¥–æ 7 | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤ –º–∞–≥–∞–∑–∏–Ω–µ, Cancel –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è. „ÄêF:designer_clicker_bot.py‚Ä†L328-L334„Äë |
| `kb_profile_menu` | 1 —Ä—è–¥ –∏–∑ 2‚Äì3 –∫–Ω–æ–ø–æ–∫ + –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ | —Ç–µ –∂–µ –Ω–∞–≤-—Ä—è–¥—ã | –¥–æ 8 | Cancel Order —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º Cancel. „ÄêF:designer_clicker_bot.py‚Ä†L336-L343„Äë |
| `kb_numeric_page` | –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ 1‚Äì5, –≤—Ç–æ—Ä–∞—è ‚Äî Prev/Next | –Ω–∞–≤-—Ä—è–¥—ã | –¥–æ 9 | –ü–∞–≥–∏–Ω–∞—Ü–∏—è –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ 3 —Å—Ç—Ä–æ–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏. „ÄêF:designer_clicker_bot.py‚Ä†L310-L322„Äë |
| `kb_confirm` | ¬´‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å¬ª + ¬´‚ùå –û—Ç–º–µ–Ω–∞¬ª | –ø–ª—é—Å —Ä—è–¥ ¬´‚óÄÔ∏è –ù–∞–∑–∞–¥/‚ùå –û—Ç–º–µ–Ω–∞¬ª + ¬´üè† –ú–µ–Ω—é¬ª | 5 –∫–Ω–æ–ø–æ–∫ (–¥–≤–µ ¬´–û—Ç–º–µ–Ω–∞¬ª) | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç Back –∏ –¥–≤–∞ Cancel. „ÄêF:designer_clicker_bot.py‚Ä†L323-L327„Äë |
| `kb_tutorial` / `kb_skill_choices` / `kb_quest_options` | 2‚Äì5 –∫–Ω–æ–ø–æ–∫ | –Ω–∞–≤-—Ä—è–¥—ã | 4‚Äì8 | –î–∞—ë—Ç Cancel, —Ö–æ—Ç—è —É —à–∞–≥–∞ –æ–±—É—á–µ–Ω–∏—è –Ω–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è. „ÄêF:designer_clicker_bot.py‚Ä†L344-L360„Äë |

### 1.2 –ö–ª—é—á–µ–≤—ã–µ UX-–ø—Ä–æ–±–ª–µ–º—ã
1. **–ü–µ—Ä–µ–≥—Ä—É–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é** ‚Äî 13 —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–Ω–æ–ø–æ–∫ + 3 –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –Ω–∞—Ä—É—à–∞—é—Ç –ø—Ä–∞–≤–∏–ª–æ 7¬±2 –∏ Fitts' Law, —Ä–∞—Å—Ç—è–≥–∏–≤–∞—è –¥–µ–π—Å—Ç–≤–∏—è. „ÄêF:designer_clicker_bot.py‚Ä†L293-L307„Äë„ÄêF:designer_clicker_bot.py‚Ä†L277-L286„Äë
2. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è** ‚Äî —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π helper –≤—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç –∏ Back, –∏ Cancel, –¥–∞–∂–µ –Ω–∞ —Ö–∞–±–∞—Ö –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è—Ö, –ø–æ—Ä–æ–∂–¥–∞—è –¥—É–±–ª–∏ –∏ –ø—É—Ç–∞–Ω–∏—Ü—É. „ÄêF:designer_clicker_bot.py‚Ä†L277-L286„Äë
3. **–†—É—á–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è Back/Cancel** ‚Äî –¥–≤–∞ –ø–æ—á—Ç–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä—è—é—Ç FSM-–ª–æ–≥–∏–∫—É –∏ —á–∞—Å—Ç–æ –∑–∞–≤–µ—Ä—à–∞—é—Ç —Å—Ü–µ–Ω—É –≤–º–µ—Å—Ç–æ —à–∞–≥–∞ –Ω–∞–∑–∞–¥, —á—Ç–æ –ª–æ–º–∞–µ—Ç –º–µ–Ω—Ç–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å. „ÄêF:designer_clicker_bot.py‚Ä†L3385-L3493„Äë
4. **–ü–æ—Ç–µ—Ä—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Å—Ç–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –≥–æ–ª—ã–π —Å–ø–∏—Å–æ–∫ –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞/–ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∑–∞–∫–∞–∑—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞, –Ω–µ—Ç —Å—Ç–∞—Ç—É—Å–∞ ¬´–°—Ç—Ä. X/Y¬ª). „ÄêF:designer_clicker_bot.py‚Ä†L2261-L2272„Äë
5. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è** ‚Äî Cancel –≤—ã–≤–æ–¥–∏—Ç—Å—è –∏ –Ω–∞ –¥–µ–π—Å—Ç–≤–∏—è—Ö –±–µ–∑ –ø–æ—Ç–µ—Ä—å (tutorial, –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é), —á—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç —Ä–∏—Ç–º –∏ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥—Ä–∞–π–≤. „ÄêF:designer_clicker_bot.py‚Ä†L344-L360„Äë

### 1.3 –¢–æ—á–∫–∏ –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏
- **–ó–∞–∫–∞–∑—ã**: –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–∞—ë—Ç –Ω–æ–º–µ—Ä–∞ 1‚Äì5, –Ω–∞–≤ Prev/Next, –∑–∞—Ç–µ–º Back/Cancel/Menu ‚Äî –¥–æ 9 –∫–Ω–æ–ø–æ–∫, –ø—Ä–∏ —ç—Ç–æ–º —Ç–µ–∫—Å—Ç —Å–ø–∏—Å–∫–∞ –¥–ª–∏–Ω–Ω—ã–π –∏ –±–µ–∑ —Ä–∞–∑–±–∏–≤–∫–∏. „ÄêF:designer_clicker_bot.py‚Ä†L310-L322„Äë„ÄêF:designer_clicker_bot.py‚Ä†L2261-L2272„Äë
- **–ü—Ä–æ—Ñ–∏–ª—å**: —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–ª–æ—Ç–Ω—ã–π –±–ª–æ–∫ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –º–µ—Ç—Ä–∏–∫, –Ω–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –±–∞—Ñ—Ñ–æ–≤/–∫–∞–º–ø–∞–Ω–∏–∏/—Ä–µ–ø—É—Ç–∞—Ü–∏–∏. „ÄêF:designer_clicker_bot.py‚Ä†L2993-L3005„Äë
- **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è**: –¥–≤–µ –∫–Ω–æ–ø–∫–∏ ¬´–û—Ç–º–µ–Ω–∞¬ª —Ä—è–¥–æ–º (—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è + –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏) –∏ –ª–∏—à–Ω–∏–π ¬´–ù–∞–∑–∞–¥¬ª –≤–Ω–æ—Å—è—Ç –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–π —à—É–º. „ÄêF:designer_clicker_bot.py‚Ä†L323-L327„Äë

## 2. –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é
```
üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (max 6 –∫–Ω–æ–ø–æ–∫)
‚îú‚îÄ‚îÄ üñ±Ô∏è –ö–ª–∏–∫
‚îú‚îÄ‚îÄ üíº –†–∞–±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ üìã –ó–∞–∫–∞–∑—ã
‚îÇ   ‚îú‚îÄ‚îÄ üìú –ö–∞–º–ø–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ üòà –ö–≤–µ—Å—Ç
‚îú‚îÄ‚îÄ üõí –ú–∞–≥–∞–∑–∏–Ω
‚îÇ   ‚îú‚îÄ‚îÄ ‚ö° –ë—É—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ üß∞ –≠–∫–∏–ø–∏—Ä–æ–≤–∫–∞
‚îú‚îÄ‚îÄ üë• –ö–æ–º–∞–Ω–¥–∞
‚îú‚îÄ‚îÄ üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
‚îî‚îÄ‚îÄ üë§ –ü—Ä–æ—Ñ–∏–ª—å
    ‚îú‚îÄ‚îÄ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    ‚îú‚îÄ‚îÄ üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ üéØ –ù–∞–≤—ã–∫–∏
    ‚îú‚îÄ‚îÄ üè¢ –°—Ç—É–¥–∏—è
    ‚îî‚îÄ‚îÄ üèÜ –¢–æ–ø
```

**–ü—Ä–∞–≤–∏–ª–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏**
- –ö–∞–∂–¥–æ–µ –ø–æ–¥–º–µ–Ω—é –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–π —Å—Ç–∞—Ç—É—Å–∞ (¬´–°—Ç—Ä–∞–Ω–∏—Ü–∞ 1/3¬ª, ¬´–ü—Ä–æ–≥—Ä–µ—Å—Å 40%¬ª).
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–æ–ø—É—Å—Ç–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã: ¬´‚óÄÔ∏è –ù–∞–∑–∞–¥¬ª (–µ—Å–ª–∏ –µ—Å—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å) –∏ ¬´üè† –ú–µ–Ω—é¬ª. ¬´‚ùå –û—Ç–º–µ–Ω–∞¬ª ‚Äî –ª–∏—à—å –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è—Ö –∏ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è: —Å—Ç—Ä–µ–ª–∫–∏ ¬´‚óÄÔ∏è/‚ñ∂Ô∏è¬ª –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π, –Ω–æ–º–µ—Ä–∞ ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–æ, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü –≤ —Ç–µ–∫—Å—Ç–µ.

## 3. –≠–∫—Ä–∞–Ω–Ω—ã–µ –º–∞–∫–µ—Ç—ã ¬´–¥–æ/–ø–æ—Å–ª–µ¬ª

### 3.1 –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- **–ë—ã–ª–æ:** 13 —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–Ω–æ–ø–æ–∫ + Back/Cancel/Menu, —Å–ª–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–π —Ä–∞–∑–¥–µ–ª. „ÄêF:designer_clicker_bot.py‚Ä†L293-L307„Äë
- **–°—Ç–∞–Ω–µ—Ç:**
  ```text
  üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
  –í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî –∏ –≤–ø–µ—Ä—ë–¥ –∫ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏!
  üñ±Ô∏è –ö–ª–∏–∫ | üíº –†–∞–±–æ—Ç–∞
  üõí –ú–∞–≥–∞–∑–∏–Ω | üë• –ö–æ–º–∞–Ω–¥–∞
  üéí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å | üë§ –ü—Ä–æ—Ñ–∏–ª—å
  üß≠ –ö–Ω–æ–ø–∫–∏: ‚óÄÔ∏è –ù–∞–∑–∞–¥ ‚Ä¢ üè† –ú–µ–Ω—é
  ```

### 3.2 –ó–∞–∫–∞–∑—ã
- **–ë—ã–ª–æ:** ¬´–ó–∞–∫–∞–∑—ã¬ª –≤—ã–≤–æ–¥—è—Ç –¥–ª–∏–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å —Ü–∏—Ñ—Ä–∞–º–∏ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –∫–Ω–æ–ø–æ–∫. „ÄêF:designer_clicker_bot.py‚Ä†L2261-L2272„Äë
- **–°—Ç–∞–Ω–µ—Ç:**
  ```text
  üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –∑–∞–∫–∞–∑—ã ‚Äî –°—Ç—Ä. 1/3
  –£—Ä–æ–≤–µ–Ω—å 5? –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–≤–µ–∂–∏–µ –±—Ä–∏—Ñ—ã!
  1Ô∏è‚É£ –í–∏–∑–∏—Ç–∫–∞ ‚Äî 10 –∫–ª–∏–∫–æ–≤
  2Ô∏è‚É£ –õ–æ–≥–æ—Ç–∏–ø ‚Äî 15 –∫–ª–∏–∫–æ–≤
  ‚óÄÔ∏è –ù–∞–∑–∞–¥ | ‚ñ∂Ô∏è –î–∞–ª–µ–µ
  üè† –ú–µ–Ω—é
  ```

### 3.3 –ü—Ä–æ—Ñ–∏–ª—å
- **–ë—ã–ª–æ:** –ø–ª–æ—Ç–Ω—ã–π –±–ª–æ–∫ –±–µ–∑ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫. „ÄêF:designer_clicker_bot.py‚Ä†L2993-L3005„Äë
- **–°—Ç–∞–Ω–µ—Ç:**
  ```text
  üë§ –í–∞—à –ø—Ä–æ—Ñ–∏–ª—å
  –£—Ä–æ–≤–µ–Ω—å 7 ‚Ä¢ 320/450 XP ‚Ä¢ –ë–∞–ª–∞–Ω—Å 1‚ÄØ540 ‚ÇΩ
  ‚ö° –°–∏–ª–∞ –∫–ª–∏–∫–∞: 9 ‚Ä¢ –ü–∞—Å—Å–∏–≤: 120 ‚ÇΩ/–º–∏–Ω
  üì¶ –ê–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑: –õ–æ–≥–æ—Ç–∏–ø (7/15)
  üîÆ –ë–∞—Ñ—Ñ—ã: –í–∏—Ä—É—Å–Ω—ã–π –ø–æ—Å—Ç (5 –º–∏–Ω)
  üìú –ö–∞–º–ø–∞–Ω–∏—è: –ì–ª–∞–≤–∞ 2 ‚Äî 60%
  üè¢ –†–µ–ø—É—Ç–∞—Ü–∏—è —Å—Ç—É–¥–∏–∏: 3 (+3% –¥–æ—Ö–æ–¥)
  ```

## 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∫–æ–¥—É

### 4.1 –ï–¥–∏–Ω—ã–π helper –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
```python
class UIHelper:
    @staticmethod
    def universal_nav(*, add_back: bool, add_cancel: bool = False, add_menu: bool = True) -> List[List[KeyboardButton]]:
        row: List[KeyboardButton] = []
        if add_back:
            row.append(KeyboardButton(text=RU.BTN_BACK))
        if add_cancel:
            row.append(KeyboardButton(text=RU.BTN_CANCEL))
        nav_rows = [row] if row else []
        if add_menu:
            nav_rows.append([KeyboardButton(text=RU.BTN_HOME)])
        return nav_rows

    @staticmethod
    def wrap(rows: List[List[KeyboardButton]], *, add_back: bool, add_cancel: bool = False, add_menu: bool = True) -> ReplyKeyboardMarkup:
        seen: Set[str] = set()
        deduped: List[List[KeyboardButton]] = []
        for row in rows + UIHelper.universal_nav(add_back=add_back, add_cancel=add_cancel, add_menu=add_menu):
            filtered = [btn for btn in row if btn.text not in seen]
            if filtered:
                seen.update(btn.text for btn in filtered)
                deduped.append(filtered)
        return ReplyKeyboardMarkup(keyboard=deduped, resize_keyboard=True)
```
- –•–∞–±—ã –≤—ã–∑—ã–≤–∞—é—Ç `UIHelper.wrap(rows, add_back=False)`.
- –ü–æ–¥–º–µ–Ω—é ‚Äî `UIHelper.wrap(rows, add_back=True)`.
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Äî `UIHelper.wrap(rows, add_back=False, add_cancel=True)`.

### 4.2 –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä
```diff
-def kb_main_menu() -> ReplyKeyboardMarkup:
-    rows = [
-        [KeyboardButton(text=RU.BTN_CLICK), KeyboardButton(text=RU.BTN_ORDERS)],
-        ...
-    ]
-    return _with_universal_nav(rows)
+def kb_main_menu() -> ReplyKeyboardMarkup:
+    rows = [
+        [KeyboardButton(text=RU.BTN_CLICK), KeyboardButton(text=RU.BTN_WORK)],
+        [KeyboardButton(text=RU.BTN_SHOP), KeyboardButton(text=RU.BTN_TEAM)],
+        [KeyboardButton(text=RU.BTN_WARDROBE), KeyboardButton(text=RU.BTN_PROFILE)],
+    ]
+    return UIHelper.wrap(rows, add_back=False)
```
(–ì–¥–µ `RU.BTN_WORK = "üíº –†–∞–±–æ—Ç–∞"` ‚Äî –Ω–æ–≤–∞—è –≥—Ä—É–ø–ø–∞.)

–î—Ä—É–≥–∏–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `kb_work_menu`, `kb_shop_menu`, `kb_profile_menu`, `kb_confirm_action` —Å –ø–µ—Ä–µ–¥–∞—á–µ–π `add_cancel=True` —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

### 4.3 –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ ¬´–ù–∞–∑–∞–¥¬ª
- –í FSM-–ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –≤ `state.update_data(parent="work_root")`.
- –°–æ–∑–¥–∞—Ç—å –º–∞–ø–ø–∏–Ω–≥ `PARENTS = {"orders": (OrdersState.browsing, kb_work_menu, RU.WORK_HEADER), ...}`.
- `handle_back` —á–∏—Ç–∞–µ—Ç `parent` –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ –Ω—É–∂–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–µ–ø–æ—á–µ–∫ `if current == ‚Ä¶`.
- `cancel_any` –æ—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π, –≥–¥–µ `add_cancel=True`.

### 4.4 –¢–µ–∫—Å—Ç—ã
- –î–æ–±–∞–≤–∏—Ç—å –≤ `RU` –Ω–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –æ–ø–∏—Å–∞–Ω–∏–π (`WORK_HEADER`, `SHOP_PROMPT`, `PROFILE_HEADER`, `ORDERS_PAGE_FMT`, `PAGINATION_STATUS`).
- –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è-—Ö–µ–ª–ø–µ—Ä—ã —Å —É—á—ë—Ç–æ–º —Ä–∏—Ç–º–∞ ¬´–∑–∞–≥–æ–ª–æ–≤–æ–∫ ‚Üí –æ–ø–∏—Å–∞–Ω–∏–µ ‚Üí –¥–µ–π—Å—Ç–≤–∏–µ/—Å—Ç–∞—Ç—É—Å¬ª.

## 5. –ü–∞—Ç—á–∏ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### 5.1 –ó–∞–∫–∞–∑—ã
```diff
-    await message.answer(text, reply_markup=kb_numeric_page(show_prev, show_next))
+    status = RU.ORDERS_STATUS.format(page=page + 1, pages=pages)
+    await message.answer(
+        f"{RU.ORDERS_HEADER}\n{status}\n{body}",
+        reply_markup=kb_orders(page, pages, show_prev, show_next),
+    )
```
`kb_orders` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–º–µ—Ä–∞ 1‚Äì5 –∏ –æ—Ç–¥–µ–ª—å–Ω—É—é —Å—Ç—Ä–æ–∫—É —Å—Ç—Ä–µ–ª–æ–∫ —á–µ—Ä–µ–∑ `UIHelper.wrap(..., add_back=True)`.

### 5.2 –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–æ–∫
```diff
-def kb_confirm(confirm_text: str = RU.BTN_CONFIRM) -> ReplyKeyboardMarkup:
-    rows = [[KeyboardButton(text=confirm_text), KeyboardButton(text=RU.BTN_CANCEL)]]
-    return _with_universal_nav(rows)
+def kb_confirm(confirm_text: str = RU.BTN_CONFIRM) -> ReplyKeyboardMarkup:
+    rows = [[KeyboardButton(text=confirm_text), KeyboardButton(text=RU.BTN_CANCEL)]]
+    return UIHelper.wrap(rows, add_back=False, add_cancel=True)
```

### 5.3 –¢–µ–∫—Å—Ç –ø—Ä–æ—Ñ–∏–ª—è
```diff
-        text = RU.PROFILE.format(...)
+        text = RU.PROFILE_HEADER.format(level=user.level, xp=user.xp, xp_need=xp_need)
+        text += "\n" + RU.PROFILE_STATS.format(cp=stats["cp"], pm=int(rate * 60))
+        text += "\n" + RU.PROFILE_ORDER.format(order=order_str)
+        text += "\n" + RU.PROFILE_BUFFS.format(buffs=buffs_text)
+        text += "\n" + RU.PROFILE_CAMPAIGN.format(campaign=campaign_text)
+        text += "\n" + RU.PROFILE_PRESTIGE.format(rep=prestige.reputation)
```

### 5.4 –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
```python
def kb_work_menu() -> ReplyKeyboardMarkup:
    rows = [
        [KeyboardButton(text=RU.BTN_ORDERS), KeyboardButton(text=RU.BTN_CAMPAIGN)],
        [KeyboardButton(text=RU.BTN_QUEST)],
    ]
    return UIHelper.wrap(rows, add_back=True)
```
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `kb_shop_menu`, `kb_profile_menu`.

## 6. –¢–∞–±–ª–∏—Ü–∞ ¬´–¥–æ / –ø–æ—Å–ª–µ¬ª
| –≠–∫—Ä–∞–Ω | –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –ò–∑–º–µ–Ω–µ–Ω–∏–µ UX |
| --- | --- | --- | --- |
| –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é | 13 —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–Ω–æ–ø–æ–∫ + Cancel/Menu | 6 –∫–Ω–æ–ø–æ–∫ –±–µ–∑ Cancel | –°–Ω–∏–∂–µ–Ω–∏–µ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏, –±—ã—Å—Ç—Ä–µ–µ –≤—ã–±–æ—Ä |
| –ó–∞–∫–∞–∑—ã | 8‚Äì10 –∫–Ω–æ–ø–æ–∫ (–Ω–æ–º–µ—Ä–∞, Prev/Next, Back/Cancel/Menu) | 6 –∫–Ω–æ–ø–æ–∫ (–Ω–æ–º–µ—Ä–∞, —Å—Ç—Ä–µ–ª–∫–∏, –ú–µ–Ω—é) | –ß—ë—Ç–∫–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –º–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ |
| –ü—Ä–æ—Ñ–∏–ª—å | –°–ø–ª–æ—à–Ω–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ | –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ —É–¥–µ—Ä–∂–∞–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ |
| –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è | ¬´–û—Ç–º–µ–Ω–∞¬ª –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è, –µ—Å—Ç—å ¬´–ù–∞–∑–∞–¥¬ª | ¬´–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å/–û—Ç–º–µ–Ω–∞¬ª + ¬´–ú–µ–Ω—é¬ª | –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –∏—Å—Ö–æ–¥, –Ω–µ—Ç –ª–∏—à–Ω–∏—Ö –≤—ã–±–æ—Ä–æ–≤ |

## 7. –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
1. –î–æ–±–∞–≤–∏—Ç—å `UIHelper` –∏ –∑–∞–º–µ–Ω–∏—Ç—å –≤—ã–∑–æ–≤—ã `_with_universal_nav`.
2. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –Ω–∞–±–æ—Ä `RU`-—Å—Ç—Ä–æ–∫ –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
3. –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ –º–æ–¥—É–ª—å–Ω—ã–µ (`kb_main_menu`, `kb_work_menu`, `kb_orders`, ‚Ä¶).
4. –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ Back/Cancel, –∏—Å–ø–æ–ª—å–∑—É—è —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Ä–æ–¥–∏—Ç–µ–ª—è –≤ `FSMContext`.
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏: –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –º–µ–Ω—é, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–∫—É–ø–æ–∫, –ø–∞–≥–∏–Ω–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤.
6. –ü—Ä–æ–≤–µ—Å—Ç–∏ UX smoke-test —Å 5‚Äì10 –∫–ª–∏–∫–∞–º–∏ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –∑–∞–∫–∞–∑–∞, —É–±–µ–¥–∏—Ç—å—Å—è –≤ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–≤–æ–π–Ω—ã—Ö ¬´–û—Ç–º–µ–Ω–∞¬ª.
